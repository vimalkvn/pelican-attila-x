{% extends "base.html" %}

{% block title %}{{ SITENAME }} - Articles by {{ author_name }}{% endblock %}

<!-- To support both image in relative path and url  -->
{% set author_name = author.name | title  %}
{% if AUTHORS_BIO and author.name.lower() in AUTHORS_BIO %}
  {% set author_avatar = AUTHORS_BIO[author.name.lower()].image %}
  {% if author_avatar %}
    {% if author_avatar|lower|truncate(4, True, '') == "http" %}
      {% set selected_avatar = author_avatar %}
    {% else %}
      {% set selected_avatar = SITEURL+"/"+author_avatar %}
    {% endif %}
  {% endif %}

  {% set author_cover = AUTHORS_BIO[author.name.lower()].cover %}
  {% if author_cover %}
    {% if author_cover|lower|truncate(4, True, '') == "http" %}
      {% set cover_image = author_cover %}
    {% else %}
      {% set cover_image = SITEURL + "/" + author_cover %}
    {% endif %}
  {% endif %}

  {% set author_name = AUTHORS_BIO[author.name.lower()].name or author.name %}
{% elif HEADER_COVER %}
  {% if HEADER_COVER|lower|truncate(4, True, '') == "http" %}
    {% set cover_image = HEADER_COVER %}
  {% else %}
    {% set cover_image = SITEURL+"/"+HEADER_COVER %}
  {% endif %}
{% endif %}

{% block opengraph %}
    {{ super() }}
    <meta property="og:title" content="Articles by {{ author }} - {{ SITENAME }}">
    <meta property="og:type" content="profile">
    <meta property="profile:first_name" content="{{ author.name.split(' ')[0] }}">
    <meta property="profile:last_name" content="{{ author.name.split(' ')[1:]|join(' ') }}">
    <meta property="profile:username" content="{{ author.slug }}">
{% endblock opengraph %}

{% block header %}
    <header {%if cover_image %}class="blog-header has-cover"{% else %}class="blog-header"{% endif %}>
      <div class="inner">
        <div class="archive archive-author box archive-box">
          <span class="archive-info">
            <span class="archive-type">Author</span>
            <span class="archive-count">{{ articles|count }} {% if articles|count > 1 %} Posts {% else %} Post {% endif %}</span>
          </span>
          {% if AUTHORS_BIO and author.name.lower() in AUTHORS_BIO %}
          {% set author_name = author.name.lower() %}
          <figure class="archive-avatar avatar">
            {% if selected_avatar %}
              <img src="{{selected_avatar}}" alt="{{author_name}}" />
            {% endif %}
          </figure>
          <h2 class="archive-title">{{ author.name }}</h2>
          {% if AUTHORS_BIO[author_name].bio %}
            <span class="archive-description">{{ AUTHORS_BIO[author_name].bio }}</span>
          {% endif %}
          <span class="archive-links">
            {% if AUTHORS_BIO[author_name].website %}
              <a target="_blank" href="{{ AUTHORS_BIO[author_name].website}}" title="Website"><i class="icon icon-globe"></i><span>Website</span></a>
            {% endif %}
            {% if AUTHORS_BIO[author_name].gitlab %}
              <a target="_blank" href="{{ AUTHORS_BIO[author_name].gitlab }}" title="GitLab""><i class="icon icon-gitlab"></i><span>GitLab</span></a>
            {% endif %}
            {% if AUTHORS_BIO[author_name].mastodon %}
              <a target="_blank" href="{{ AUTHORS_BIO[author_name].mastodon }}" title="Mastodon"><i class="icon icon-mastodon"></i><span>Mastodon</span></a>
            {% endif %}
            {% if AUTHORS_BIO[author_name].twitter %}
              <a target="_blank" href="{{ AUTHORS_BIO[author_name].twitter }}" title="Twitter"><i class="icon icon-twitter"></i><span>Twitter</span></a>
            {% endif %}
            {% if AUTHORS_BIO[author_name].facebook %}
              <a target="_blank" href="{{ AUTHORS_BIO[author_name].facebook }}" title="Facebook"><i class="icon icon-facebook"></i><span>Facebook</span></a>
            {% endif %}
          </span>
          {% endif %}
        </div>
    
        {% if cover_image %}
        <div class="blog-cover cover">
          <img 
          src="{{ cover_image }}"
          alt="{{ SITENAME }}" />
        </div>
        {% endif %}
      </div>
    </header>
{% endblock header %}

{% block content %}
<div id="index" class="container">
  <main class="content" role="main">
    {% include "partials/loop.html" %}
  </main>
</div>
{% endblock content %}
